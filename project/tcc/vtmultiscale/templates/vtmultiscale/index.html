{% extends 'main/base.html' %}
{% load staticfiles %}
{% load static from staticfiles %}
{% block extrahead %}
    <link href="{% static 'vtmultiscale/style_calendar.css' %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block content %}

    <div class="col-lg-12">
        <div id="sp_map">
        </div>
    </div>
    <div class="col-lg-3">
        <div class="col-lg-12">
            <div id="chart0" class="clearfix"></div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="col-lg-12">
            <div id="chart1" class="clearfix"></div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="col-lg-12">
            <div id="chart2" class="clearfix"></div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="col-lg-12">
            <div id="chart3" class="clearfix"></div>
        </div>
    </div>

<script src="{% static 'vtmultiscale/d3/d3.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'vtmultiscale/jquery/jquery-3.1.1.min.js' %}" type="text/javascript"></script>
<script type="text/javascript" src="{% static "vtmultiscale/ajax/jquery-3.1.1.min.js" %}"></script>
<script src="{% static 'vtmultiscale/d3-queue/d3-queue.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vtmultiscale/topojson/topojson.min.js' %}" type="text/javascript"></script>
<!-- CUSTOM JAVASCRIPT -->
<script src="{% static 'vtmultiscale/model_classes.js' %}" type="text/javascript"></script>
<script src="{% static 'vtmultiscale/scales_and_formats.js' %}" type="text/javascript"></script>
<script src="{% static 'vtmultiscale/data_functions.js' %}" type="text/javascript"></script>
<script src="{% static 'vtmultiscale/draw_functions.js' %}" type="text/javascript"></script>
<script src="{% static 'vtmultiscale/mapa.js' %}" type="text/javascript"></script>

<script>
var div_sp_map_id = "#sp_map";
var url_sp_map_full = "{% static 'vtmultiscale/maps/sp-state-full.json' %}";
var url_sp_map_simpl = "{% static 'vtmultiscale/maps/sp-state-simpl.json' %}";

var station_geo_array = {{stations_json|safe}}
var section_array = {{sections_json|safe}}
var sub_section_array = {{sub_sections_json|safe}}
var map1 = new Mapa(
        div_sp_map_id,
        url_sp_map_full,
        station_geo_array,
        section_array,
        sub_section_array
    );

$(document).ready(function(){
	var data_years = 'banana';
    var test_promise;
    $.ajaxSetup({
        data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
    });
    function get_years() {
        test_promise = $.ajax({
            url: '{% url 'vtmultiscale:get_year' %}',
            type: 'post',
            dataType: "json",
            success: drawCalendar,
            error: function(data) {
                console.log('Got an error ');
            }
        });
    }

get_years();
});
</script>
{% endblock %}
